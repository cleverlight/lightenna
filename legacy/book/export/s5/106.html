<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>3. Database Design</title>
<base href="" />
<meta name="generator" content="Drupal S5 Book Export" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="(c) 2004-2007 Lightenna Ltd." />
<meta name="author" content="" />
<meta name="company" content="Lightenna Ltd." />
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<link rel="stylesheet" href="../../../../legacy/misc/s5/lightenna/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="../../../../legacy/misc/s5/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="../../../../legacy/misc/s5/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="../../../../legacy/misc/s5/default/opera.css" type="text/css" media="projection" id="operaFix" />
<script src="../../../../legacy/misc/s5/default/slides.js" type="text/javascript"></script>
</head>
<body>

<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header"></div>
<div id="footer"><h1>Database Training Course</h1><h2>3. Database Design</h2></div>
</div>

<div class="presentation">
<div class="slide"><h1>3. Database Design</h1>
<div class="slidebody"><p>This is the Database Design course theme.<br />
[<a href="../../../../legacy/sitefiles/lightenna.com/3.database_design.pdf">Complete set of notes</a> PDF 300Kb].</p>
</div></div><div class="slide"><h1>3.1. Functional Dependency</h1>
<div class="slidebody"><p>In this lecture we look at...<br />
[<a href="../../../../legacy/sitefiles/lightenna.com/3.1.functional_dependency.pdf">Section notes</a> PDF 48Kb]</p>
</div></div><div class="slide"><h1>3.1.01. Introduction</h1>
<div class="slidebody"><ul>
<li>What is relational design?</li>
<ul>
<li>Notion of attribute distribution</li>
<li>Conceptual-level optimisation</li>
</ul>
<li>How do we asses the quality of a design?</li>
</ul>
</div></div><div class="slide"><h1>3.1.02. Value in design</h1>
<div class="slidebody"><ul>
<li>Allocated arbitrarily by DBD under ER/EER</li>
<li>Goodness at</li>
<ul>
<li>Internal/storage level (base relations only)</li>
<ul>
<li>Reducing nulls - obvious storage benefits /frequent</li>
<li>Reducing redundancy - for efficient storage/anomalies</li>
</ul>
<li>Conceptual level</li>
<ul>
<li>Semantics of the attributes /single entity:relation</li>
<li>No spurious tuple generation /no match Attr,-PK/FK</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.03. Initial state</h1>
<div class="slidebody"><ul>
<li>Database design</li>
<li>Universal relation</li>
<ul>
<li>R = {A<sub>1</sub>, A<sub>2</sub>, …, A<sub>n</sub>}</li>
<li>Set of functional dependencies F</li>
</ul>
<li>Decompose R using F to</li>
<ul>
<li>D = {R<sub>1</sub>, R<sub>2</sub>, …, R<sub>n</sub>}</li>
<li>D is a decomposition of R under F</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.05. Aims</h1>
<div class="slidebody"><ul>
<li>Attribute preservation</li>
<ul>
<li>Union of all decomposed relations = original</li>
</ul>
<li>Lossless/non-additive join</li>
<ul>
<li>For every extension, total join of r(R<sub>i</sub>) yeilds r(R)</li>
<li>no spurious/erroneous tuples</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.06. Aims (preservation)</h1>
<div class="slidebody"><ul>
<li>Dependency preservation</li>
<ul>
<li>Constraints on the database</li>
<ul>
<li>X -&gt; Y in F of R, appears directly in R<sub>i</sub></li>
</ul>
<li>Attributes X and Y all contained in R<sub>i</sub></li>
<li>Each relation R<sub>i</sub> in 3NF</li>
</ul>
<li>But what's a dependency?</li>
</ul>
</div></div><div class="slide"><h1>3.1.07. Functional dependency</h1>
<div class="slidebody"><ul>
<li>Constraint between two sets of attributes</li>
<ul>
<li>Formal method for grouping attributes</li>
</ul>
<li>DB as one single universal relation/-literal</li>
<ul>
<li>R = {A<sub>1</sub>,A<sub>2</sub>,…,A<sub>n</sub>}</li>
<li>Two sets of attributes, X subset R,Y subset R</li>
</ul>
<li>Functional dependency (FD or f.d.) X -&gt; Y</li>
<li>If t<sub>1</sub>[X] = t<sub>2</sub>[X], then t<sub>1</sub>[Y] = t<sub>2</sub>[Y]</li>
<ul>
<li>Values of the Y attribute depend on value of X</li>
<li>X functionally determines Y, not reverse necessarily</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.08. Dependency derivation</h1>
<div class="slidebody"><ul>
<li>Rules of inference</li>
<li>reflexive: if X implies Y then  X -&gt; Y</li>
<li>augment:  {X -&gt; Y} then XZ -&gt; YZ</li>
<li>transitive: {X -&gt; Y,Y -&gt; Z} then X -&gt; Z</li>
<li>Armstrong demonstrated complete for closures</li>
</ul>
</div></div><div class="slide"><h1>3.1.09. Functional dependency</h1>
<div class="slidebody"><ul>
<li>If X is a key (primary and/or candidate)</li>
<ul>
<li>All tuples t<sub>i</sub> have a unique value for X</li>
<li>No two tuples (t<sub>1</sub>,t<sub>2</sub>) share a value of X</li>
</ul>
<li>Therefore X -&gt; Y</li>
<ul>
<li>For any subset of attributes Y</li>
</ul>
<li>Examples</li>
<ul>
<li>SSN -&gt; {Fname, Minit, Lname}</li>
<li>{Country of issue, Driving license no} -&gt; SSN</li>
<li>Mobile area code -&gt; Mobile<br />
         network (not anymore)</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.10. Process</h1>
<div class="slidebody"><ul>
<li>Typically start with set of f.d., F</li>
<ul>
<li>determined from semantics of attributes</li>
</ul>
<li>Then use IR1,2,3 to infer additional f.d.s</li>
<li>Determine left hand sides (Xs)</li>
<ul>
<li>Then determine all attributes dependent on X</li>
</ul>
<li>For each set of attributes X,</li>
<ul>
<li>determine X+ :the set of attributes f.d'ed by X on F</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.11. Algorithm</h1>
<div class="slidebody"><ul>
<li>Compute the closure of X under F: X+</li>
<ul>
<li>xplus = x;</li>
<li>do</li>
<ul>
<li>oldxplus = xplus;</li>
<li>for (each f.d. Y -&gt; Z in F)</li>
<ul>
<li>if (xplus implies Y) then</li>
<li>xplus = xplus union Z;</li>
</ul>
</ul>
<li>while (xplus != oldxplus);</li>
</ul>
</div></div><div class="slide"><h1>3.1.12. Function dependency</h1>
<div class="slidebody"><ul>
<li>Consider a relation schema R(A,B,C,D) and a set F of functional dependencies</li>
<ul>
<li>Aim to find all keys (minimal superkeys),</li>
<li>by determining closures of all possible X subsets of R’s attributes, e.g.</li>
<ul>
<li>A+, B+, C+, D+,</li>
<li>AB+, AC+, AD+, BC+, BD+, CD+</li>
<li>ABC+, ABD+, BCD+</li>
<li>ABCD+</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.13. Worked example</h1>
<div class="slidebody"><ul>
<li>Let R be a relational schema R(A, B, C, D)</li>
<li>Simple set of f.d.s</li>
<li>AB -&gt; C, C -&gt; D, D -&gt; A</li>
<li>Calculate singletons</li>
<ul>
<li>A+, B+, C+, D+,</li>
</ul>
<li>Pairs</li>
<ul>
<li>AB+, AC+,…</li>
</ul>
<li>Triples</li>
<ul>
<li>and so on</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.14. Worked example</h1>
<div class="slidebody"><ul>
<li>Compute sets of closures</li>
<ul>
<li>AB -&gt; C, C -&gt; D, D -&gt; A</li>
</ul>
<li>1.Singletons</li>
<ul>
<li>A+ -&gt; A</li>
<li>B+ -&gt; B</li>
<li>C+ -&gt; CDA</li>
<li>D+ -&gt; AD</li>
</ul>
<li>Question: are any singletons superkeys?</li>
</ul>
</div></div><div class="slide"><h1>3.1.15. F.d. closure example</h1>
<div class="slidebody"><ul>
<li>2.Pairs (note commutative)</li>
<ul>
<li>AB+ -&gt; ABCD</li>
<li>AC+ -&gt; ACD</li>
<li>AD+ -&gt; AD</li>
<li>BC+ -&gt; ABCD</li>
<li>BD+ -&gt; ABCD</li>
<li>CD+ -&gt; ACD</li>
</ul>
<li>Superkeys?</li>
</ul>
</div></div><div class="slide"><h1>3.1.16. F.d. closure example</h1>
<div class="slidebody"><ul>
<li>3.Triples</li>
<ul>
<li>ABC+ -&gt; ABCD</li>
<li>ABD+ -&gt; ABCD</li>
<li>BCD+ -&gt; ABCD</li>
</ul>
<li>Superkeys? Minimal superkeys (keys)?</li>
<ul>
    </ul>
<li>4.Quadruples</li>
<ul>
<li>ABCD+ -&gt; ABCD</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.1.17. F.d. closure summary</h1>
<div class="slidebody"><ul>
<li>Superkeys:</li>
<ul>
<li>AB, BC, BD, ABC, ABD, BCD, ABCD</li>
</ul>
<li>Minimal superkeys (keys)</li>
<ul>
<li>AB, BC, BD</li>
</ul>
</div></div><div class="slide"><h1>3.2. Normal Forms</h1>
<div class="slidebody"><p>In this lecture we look at...<br />
[<a href="../../../../legacy/sitefiles/lightenna.com/3.2.normal_forms.pdf">Section notes</a> PDF 121Kb]</p>
</div></div><div class="slide"><h1>3.2.01. Orthogonal design</h1>
<div class="slidebody"><ul>
<li>Information Principle:</li>
<ul>
<li>The entire information content of the database is represented in one and only one way, namely as explicit values in column positions in tables</li>
</ul>
<li>Implies that two relations cannot have the same meaning</li>
<ul>
<li>unless they explicitly have the same design/attributes (including name)</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.02. Normalization</h1>
<div class="slidebody"><ul>
<li>Reduced redundancy</li>
<li>Organised data efficiently</li>
<li>Improves data consistency</li>
<ul>
<li>Reduces chance of update anomalies</li>
<li>Data duplicated, then updated in only one location</li>
</ul>
<li>Only duplicate primary key</li>
<ul>
<li>All non-key data stored only once</li>
</ul>
<li>Data spread across multiple tables, instead of one Universal relation R</li>
</ul>
</div></div><div class="slide"><h1>3.2.03. Good or bad?</h1>
<div class="slidebody"><ul>
<li>Depends on Application</li>
<li>OLTP (Transaction processing)</li>
<ul>
<li>Lots of small transactions</li>
<li>Need to execute updates quickly</li>
</ul>
<li>OLAP (Analytical processing/DSS)</li>
<ul>
<li>Largely Read-only</li>
<li>Redundant data copies facilitate Business Intellegence applications, e.g. star schema (later)</li>
</ul>
<li>3NF considered ‘normalised’</li>
<ul>
<li>save special cases</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.04. Normal forms (1NF)</h1>
<div class="slidebody"><ul>
<li>First Normal form (1NF)</li>
<ul>
<li>Disallows multivalued attributes</li>
<li>Part of the basic relational model</li>
</ul>
<li>Domain must include only atomic values</li>
<ul>
<li>simple, indivisible</li>
</ul>
<li>Value of attribute-tuple in extension of schema</li>
<li>t[A<sub>i</sub>] &isin; (A<sub>i</sub>)</li>
</ul>
</div></div><div class="slide"><h1>3.2.05. Normalisation (1NF)</h1>
<div class="slidebody"><ul>
<li>Remove fields containing comma separated lists</li>
<li>Multi-valued attribute (A<sub>MV</sub>) of R<sub>i</sub></li>
<li>Create new relation (R<sub>NEW</sub>)</li>
<ul>
<li>with FK to R<sub>i</sub>[PK]</li>
<li>R<sub>NEW</sub>(UID, A<sub>MV</sub>, FK<sub>I</sub>)</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.06. Normalisation (1NF)</h1>
<div class="slidebody"><div class="bullets">
<ul>
<li>On weak entity</li>
<li>On strong entity</li>
</ul>
</div>
<p><a href="../../../../legacy/sitefiles/lightenna.com/normal_forms_weak_entity_big.png"> <img style="margin: 10px;" src="../../../../legacy/sitefiles/lightenna.com/normal_forms_weak_entity.jpg" alt="weak entity example" border="0" /></a><br />
<a href="../../../../legacy/sitefiles/lightenna.com/normal_forms_strong_entity_big.png"> <img style="margin: 10px;" src="../../../../legacy/sitefiles/lightenna.com/normal_forms_strong_entity.jpg" alt= "strong entity example" border="0" /></a></p>
</div></div><div class="slide"><h1>3.2.07. Normal forms (2NF)</h1>
<div class="slidebody"><ul>
<li>A relation R<sub>i</sub> is in 2NF if:</li>
<ul>
<li>Every nonprime attribute A in R<sub>i</sub> is</li>
<li>fully functionally dependent on 1y key of R</li>
</ul>
<li>If all keys are singletons, guaranteed</li>
<li>If R<sub>i</sub> has composite key are</li>
<ul>
<li>all non-key attributes fully functionally dependent</li>
<li>on all attributes of composite key?</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.08. Normal forms (2NF)</h1>
<div class="slidebody"><ul>
<li>Second normal form (2NF)</li>
<ul>
<li>Full functional dependency X &rarr; Y</li>
<ul>
<li>A &isin; X, (X - {A}) &not;&rarr; Y</li>
</ul>
</ul>
<li>If any attribute A is removed from X</li>
<li>Then X &rarr; Y no longer holds</font></li>
<ul>
<li>Partial functional dependency</li>
<li>A &isin; X, (X - {A}) &rarr; Y</font></li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.09. Normal forms (2NF)</h1>
<div class="slidebody"><ul>
<li>In context</li>
<ul>
<li>Not 2NF: AB &rarr; C, A &rarr; C</li>
<ul>
<li>AB &rarr; C is not in 2NF, because B can be removed</li>
</ul>
<li>Not 2NF: AB &rarr; CDE, B &rarr; DE</li>
<ul>
<li>because attributes D&amp;E are dependent on part of the composite key (B of AB), not all of it</li>
</ul>
</ul>
</ul</p>
</div></div><div class="slide"><h1>3.2.10. Normalisation (2NF)</h1>
<div class="slidebody"><ul>
<li>Split attributes not depended on all of the primary key into separate relations</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/normal_forms_2NF_big.png"><img src="../../../../legacy/sitefiles/lightenna.com/normal_forms_2NF.jpg"/></a></p>
</div></div><div class="slide"><h1>3.2.11. Normal forms (BCNF)</h1>
<div class="slidebody"><ul>
<li>Boyce-Codd Normal form (BCNF)</li>
<ul>
<li>Simpler, stricter 3NF</li>
<ul>
<li>BCNF &rarr; 3NF</li>
<li>3NF does not imply BCNF</li>
</ul>
<li>nontrivial functional dependency X &rarr; Y</li>
<li>Then X must be a superkey</li>
</ul>
</div></div><div class="slide"><h1>3.2.12. Normal forms (3NF)</h1>
<div class="slidebody"><ul>
<li>Third Normal form (3NF)</li>
<li>Derived/based on transitive dependency</li>
<li>For all nontrivial functional dependencies<br />
    X &rarr; A</li>
<li>Either X must be a superkey</li>
<li>Or A is a prime attribute<br />
    (member of a key)</li>
</ul>
</div></div><div class="slide"><h1>3.2.13. Normal forms in context</h1>
<div class="slidebody"><ul>
<li>AB &rarr; C, C &rarr; D, D &rarr; A</li>
<li>In context</li>
<ul>
<li>3NF? Yes</li>
<ul>
<li>Because AB is a superkey and</li>
<li>D and A are prime attributes</li>
</ul>
<li>BCNF? No</li>
<ul>
<li>Because C and D are not superkeys</li>
<li>(even though AB is)</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.2.14. Normalisation (3NF)</h1>
<div class="slidebody"><ul>
<li>CarMakes not in 3NF because:</li>
<ul>
<li>singleton key A</li>
<li>non-trivial fd B &rarr; C</font></li>
<ul>
<li>B not superkey, C not prime attribute</li>
</ul>
</ul>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/normal_forms_3NF_big.png"><br />
<img src="../../../../legacy/sitefiles/lightenna.com/normal_forms_3NF.jpg" /></a></p>
</div></div><div class="slide"><h1>3.3. OODB</h1>
<div class="slidebody"><p>In this lecture we look at...<br />
[<a href="http://www.lightenna.com/legacy/sitefiles/lightenna.com/3.3.oodb.pdf">Section notes</a> PDF 34Kb]</p>
</div></div><div class="slide"><h1>3.3.01. Introduction</h1>
<div class="slidebody"><ul>
<li>Database architectures, beyond</li>
<li>Why OODBMS?</li>
<li>ObjectStore</li>
<li>CORBA object distribution standard</li>
</ul>
</div></div><div class="slide"><h1>3.3.02. Large DBMS</h1>
<div class="slidebody"><ul>
<li>Complex entity fragmentation</li>
<ul>
<li>across many relations</li>
</ul>
<li>Breaks the miniworld-realworld dichotomy</li>
<li>Requires conceptual abstracting layer</li>
<li>Difficult to retrieve all information for x</li>
<li>Compounded by version control</li>
</ul>
</div></div><div class="slide"><h1>3.3.03. Object orientation</h1>
<div class="slidebody"><ul>
<li>Object components (icv triples)</li>
<ul>
<li>Object Identity (OID), I</li>
<ul>
<li>replaces primary key</li>
</ul>
<li>Type constructor, c</li>
<ul>
<li>how the object state is constructed from sub-comp</li>
<li>e.g. atom, tuple (struct), set, list, bag, array</li>
</ul>
<li>Object state, v</li>
<li>Object behaviour/action</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.3.04. Desirable features</h1>
<div class="slidebody"><ul>
<li>Encapsulation</li>
<ul>
<li>Abstract data types</li>
<li>Information hiding</li>
</ul>
<li>Object classes and behavior</li>
<ul>
<li>Defined by operations (methods)</li>
</ul>
<li>Inheritance and hierarchies</li>
<li>Strong typing (no illegal casting)</li>
<ul>
<li>don’t think about inheritance just yet</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.3.05. Desirable features</h1>
<div class="slidebody"><ul>
<li>Persistence</li>
<ul>
<li>Objects exist after termination</li>
<li>Naming and reachability mechanism</li>
<li>Late binding in Java</li>
</ul>
<li>Performance</li>
<ul>
<li>user-def functions executed on server, not client</li>
</ul>
<li>Extension into relational model</li>
<ul>
<li>Domains of objects, not just values</li>
<li>Domain hierarchies etc.</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.3.06. Desirable features</h1>
<div class="slidebody"><ul>
<li>Polymorphism</li>
<ul>
<li>aka. operator overloading</li>
<li>same method name/symbol</li>
<li>multiple implementations</li>
</ul>
<li>Easy link to Programming languages</li>
<ul>
<li>popular OO language like Java/C++</li>
<li>Better than PL/SQL integration</li>
<li>Much better than PL-JDBC integration!</li>
</ul>
<li>Highly suitable for multimedia data</li>
</ul>
</div></div><div class="slide"><h1>3.3.07. Undesirable features</h1>
<div class="slidebody"><ul>
<li>Object Ids</li>
<ul>
<li>Artificial Real-Mini, double edged sword</li>
<li>Exposes inner workings (suspended abstraction)</li>
</ul>
<li>Lack of integrity constraints</li>
<li>No concept of normalisation/forms</li>
<li>Extreme encapsulation</li>
<ul>
<li>e.g. creation of many accessor/mutator methods</li>
</ul>
<li>Lack of (better) standardisation</li>
</ul>
</div></div><div class="slide"><h1>3.3.08. More undesirables</h1>
<div class="slidebody"><ul>
<li>Originally no mechanism for specifying</li>
<li>   relationships between objects</li>
<li>In RDBMS – relationships are tuples</li>
<li>In OODBMS – relationships should be   properties of objects</li>
</ul>
</div></div><div class="slide"><h1>3.3.09. ObjectStore</h1>
<div class="slidebody"><ul>
<li>Packages supporting Java or C++</li>
<li>C++ package uses:</li>
<ul>
<li>C++ class definition for DDL</li>
<li>insert(e), remove(e) and create collections, for DML</li>
</ul>
<li>Bidirectional relationship facility</li>
<li>Persistency transparency</li>
<ul>
<li>Identical pointers to persistent and transient objects</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.3.10. CORBA</h1>
<div class="slidebody"><ul>
<li>Common Object Request Broker Architecture</li>
<li>Object communication (unifying paradigm)</li>
<ul>
<li>Distributed</li>
<li>Heterogeneous</li>
<li>Network, OS and language transparency</li>
</ul>
<li>Java implementation org.omg.CORBA</li>
<li>Also C, C++, ADA, SMALLTALK</li>
</ul>
</div></div><div class="slide"><h1>3.4. Type Inheritance and EER diagrams</h1>
<div class="slidebody"><p>In this lecture we look at...<br />
[<a href="../../../../legacy/sitefiles/lightenna.com/3.4.type_inheritance_and_eer.pdf">Section notes</a> PDF 117Kb]</p>
</div></div><div class="slide"><h1>3.4.01. Introduction</h1>
<div class="slidebody"><ul>
<li>Design/schema side (Entity types)</li>
<li>Object-orientated concepts</li>
<ul>
<li>Java, C++ or UML</li>
<li>Sub/superclasses and inheritance</li>
</ul>
<li>EER diagrams</li>
<li>EER to Relational mapping</li>
</ul>
</div></div><div class="slide"><h1>3.4.02. OO</h1>
<div class="slidebody"><ul>
<li>Inheritance concept</li>
<ul>
<li>Attributes (and methods)</li>
</ul>
<li>Subtypes and supertypes</li>
<li>Specialisation and Generalisation</li>
<li>ER diagrams</li>
<ul>
<li>show entities/entity sets</li>
</ul>
<li>EER diagrams</li>
<ul>
<li>show type inheritance</li>
<li>additional 8<sup>th</sup> step to ER&rarr;Relational mapping</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.4.03. Objects</h1>
<div class="slidebody"><ul>
<li>Basic guide to Java</li>
<li>Object, classes as blueprints</li>
<li>Object, collection of methods and attributes</li>
<li>Miniworld model of real world things</li>
<li>Object, entity in database terms</li>
</ul>
</div></div><div class="slide"><h1>3.4.04. Abstract</h1>
<div class="slidebody"><ul>
<li>Similar objects</li>
<li>Car Park example</li>
<li>Student example</li>
<li>Shared properties/attributes</li>
<li>Generalisation</li>
<li>Reverse, specialisation</li>
</ul>
</div></div><div class="slide"><h1>3.4.05. Relationships</h1>
<div class="slidebody"><ul>
<li>Using English as model</li>
<li>‘Is a’ (inheritance)</li>
<li>‘Has a’ (containment)</li>
<li>Nouns as objects</li>
<li>Verbs as methods</li>
<li>Adjectives as variables (sort of)</li>
</ul>
</div></div><div class="slide"><h1>3.4.06. Classes</h1>
<div class="slidebody"><ul>
<li>Superclasses (Student)</li>
<li>Subclasses   (Engineer, Geographer, Medic)</li>
<li>Inheritance</li>
<li>Subclass inherits superclass attributes</li>
<ul>
<li>Union of specific/local and general attributes</li>
</ul>
<li>Inheritance chains</li>
<ul>
<li>Person &rarr; Student &rarr; Engineer &rarr; Computer Scientist</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.4.07. EER Fruit example</h1>
<div class="slidebody"><ul>
<li>Partial participation</li>
<li>Disjoint subclasses</li>
<li>A fruit may be either a pear or an apple or a banana, or none of them. A fruit may not be a pear and a banana, an apple and a banana, an apple and a pear &hellip;</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/eer_simple_diagram_big.jpg"><img src="../../../../legacy/sitefiles/lightenna.com/eer_simple_diagram.jpg" alt="Extended Entity-Relationship diagram showing partial participation in disjoint subclasses" /></a></p>
</div></div><div class="slide"><h1>3.4.08. EER Wine example</h1>
<div class="slidebody"><ul>
<li>Total, disjoint</li>
<li>Equivalent to Java Abstract classes</li>
<li>A Wine has to be either Red, White or Rosé cannot be both more</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/eer_total_disjoint_big.jpg"><img src="../../../../legacy/sitefiles/lightenna.com/eer_total_disjoint.jpg" alt="EER diagram showing total participation in disjoint subclasses" /></a></p>
</div></div><div class="slide"><h1>3.4.09. More extended (EER)</h1>
<div class="slidebody"><ul>
<li>Specialisation lattices</li>
<ul>
<li>and Hierarchies</li>
</ul>
<li>Multiple inheritance</li>
<li>Union of two superclasses (u in circle)</li>
<li>In addition to basic ER notation</li>
</ul>
</div></div><div class="slide"><h1>3.4.10. EER diagramatic notation</h1>
<div class="slidebody"><ul>
<li>Subset symbol to illustrate</li>
<li>sub/superclass relationship</li>
<li>direction of relationship</li>
<li>Circle to link super to subclasses</li>
<ul>
<li>Disjoint</li>
<li>Overlapping</li>
<li>Union</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.4.11. Disjointness constraint</h1>
<div class="slidebody"><ul>
<li>Disjointness (d in circle) – single honours</li>
<li>Overlapping (o in circle) – joint honours/sports</li>
<li>Membership condition on same attribute</li>
<ul>
<li>attribute-defined specialisation</li>
<li>defining attribute</li>
<li>implies disjointness</li>
</ul>
<li>versus user-defined</li>
<ul>
<li>each entity type specifically defined by user</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.4.12. Completeness constraint</h1>
<div class="slidebody"><ul>
<li>Total specialisation</li>
<ul>
<li>Every entity in the superclass must be a member of atleast 1 subclass</li>
<li>Double line (as ER)</li>
</ul>
<li>Partial specialisation</li>
<ul>
<li>Some entites may belong to atleast 1 subclass, or none at all</li>
<li>Single line</li>
</ul>
<li>Yields 4 possibilities</li>
<ul>
<li>(Total-Dis, Total-Over, Partial-Dis, Partial-Over)</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.4.13. EER Chip example</h1>
<div class="slidebody"><ul>
<li>Total, overlapping</li>
<li>A Chip may has to be at least one of FPA Unit, Reg Block, L1 Cache, and may be more than one type</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/eer_total_overlapping_big.jpg"><img src="../../../../legacy/sitefiles/lightenna.com/eer_total_overlapping.jpg" alt="EER diagram showing total participation in overlapping sets" /></a></p>
</div></div><div class="slide"><h1>3.4.14. EER Multiple inheritance</h1>
<div class="slidebody"><ul>
<li>Type hierarchies</li>
<li>Specialisation lattices</li>
<li><i>Well, sir, the Supreme Court of the United States has determined that the tomato is for legal and commercial purposes both a fruit and a vegetable. So we can legally refer to tomato juice as 'vegetable' juice.</i></li>
<li>Candice, General Foods</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/eer_multiple_inheritance_big.jpg"><img src="../../../../legacy/sitefiles/lightenna.com/eer_multiple_inheritance.jpg" alt="EER diagram showing Multiple inheritance" /></a></p>
</div></div><div class="slide"><h1>3.4.15. EER to Relational Mapping</h1>
<div class="slidebody"><ul>
<li>Initially following 7 ER stages</li>
<li>Stage 8</li>
<li>4 different options</li>
<ul>
<li>Optimal solution based on problem</li>
</ul>
<li>Let C be superclass, S<sub>1..m</sub> subclasses</li>
</ul>
</div></div><div class="slide"><h1>3.4.16. Stage 8</h1>
<div class="slidebody"><ul>
<li>Create relation for C, and relations for S<sub>1..m</sub> each with a foreign key to C (primary key)</li>
<li>Create relations for S<sub>1..m</sub> each including all attributes of C and its primary key</li>
</ul>
</div></div><div class="slide"><h1>3.4.17. Stage 8</h1>
<div class="slidebody"><ul>
<li>Create a single relation including all attributes of C &cup; S<sub>1..m</sub> and a type/discriminating attribute</li>
<ul>
<li>only for disjoint subclasses</li>
</ul>
<li>Create a single relation as above, but include a boolean type flag for each subclass</li>
<ul>
<li>works for overlapping, and also disjoint</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.5. System Design</h1>
<div class="slidebody"><p>In this lecture we look at...<br />
[<a href="../../../../legacy/sitefiles/lightenna.com/3.5.system_design.pdf">Section notes</a> PDF 64Kb]</p>
</div></div><div class="slide"><h1>3.5.01. Databases in Application</h1>
<div class="slidebody"><ul>
<li>Where’s the data?</li>
<li>Programmer driven future</li>
<li>OODBMS limitations</li>
<li>RDBMS longevity</li>
<li>System design by</li>
<ul>
<li>Data store, delivery, interface</li>
</ul>
<li>Case study</li>
</ul>
</div></div><div class="slide"><h1>3.5.02. Where’s the data?</h1>
<div class="slidebody"><ul>
<li>Previously covered distance from User to Data (and reason for it)</li>
<li>Client-Server data model creates DBMS</li>
<ul>
<li>P2P alternative</li>
</ul>
<li>Accountability</li>
<li>Distribution (BitTorrent, eDonkey)</li>
<li>Caching</li>
</ul>
</div></div><div class="slide"><h1>3.5.03. Where’s the data?</h1>
<div class="slidebody"><ul>
<li>Answer: everywhere</li>
<li>But where is it meaningful?</li>
<li>Answer: for whom?</li>
</ul>
</div></div><div class="slide"><h1>3.5.04. Quality paradigm</h1>
<div class="slidebody"><ul>
<li>Large projects require large teams</li>
<li>Team overhead (ref 2nd year)</li>
<li>Code responsibilities</li>
<li>Data/data model resp.</li>
<li>Object responsibilities</li>
</ul>
<p><a href="../../../../legacy/sitefiles/lightenna.com/system_design_data_support_big.png"><img src="../../../../legacy/sitefiles/lightenna.com/system_design_data_support.jpg" /></a></p>
</div></div><div class="slide"><h1>3.5.05. Web application data support</h1>
<div class="slidebody"><ul>
<li>Web application programming</li>
<li>Goal, dynamically produced XHTML</li>
<li>Client side designer-programmer split</li>
<ul>
<li>CSS, XHTML</li>
</ul>
<li>Server side programmer-programmer split</li>
<ul>
<li>Old school: query design, integrator</li>
<li>New school: MVC (Model-View-Controller)</li>
<ul>
<li>Controller – user input</li>
<li>Model – modelling of external world</li>
<li>View – visual feedback</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.5.06. CMS</h1>
<div class="slidebody"><ul>
<li>Content Management System</li>
<li>part of other courses</li>
<li>CMS is a DBMS</li>
<li>Zope/Plone and ZODB</li>
<li>e107, Drupal and Seagull</li>
<li>Zend MVC Framework (pre-beta)</li>
</ul>
</div></div><div class="slide"><h1>3.5.07. OODBMS limitations</h1>
<div class="slidebody"><ul>
<li>Future unknown</li>
<li>RDBMS supports</li>
<ul>
<li>Application data sharing</li>
<li>Physical/logical data independence/views</li>
<li>Concurrency control</li>
<li>Constraints</li>
</ul>
<li>at inception these requirements not known</li>
<li>RDBMS mathematical basis &rarr;       extensible</li>
<li>Crude Type Inheritance (see EER mapping)</li>
<li>OODBMS as construction kit</li>
</ul>
</div></div><div class="slide"><h1>3.5.08. Weaknesses in RDBMS</h1>
<div class="slidebody"><ul>
<li>Data type support</li>
<li>Unwieldy, created 3VL (nulls)</li>
<li>Type Inheritance and Relationships</li>
<li>Tuple:Entity fragmentation</li>
<ul>
<li>not to be confused with ‘fragmentation’</li>
</ul>
<li>Entity approximation requires joins</li>
</ul>
</div></div><div class="slide"><h1>3.5.09. System design</h1>
<div class="slidebody"><ul>
<li>Client specifications</li>
<li>Variance amongst Mobile devices</li>
<li>Rich-media Content delivery</li>
<li>Where’s the data? (M – media database)</li>
<li>Where’s it going? (C – mobile browser)</li>
<li>How’s it going to get there? (query design)</li>
<li>What’s it going to look like? (V – XHTML)</li>
</ul>
</div></div><div class="slide"><h1>3.5.10. Muddy boots</h1>
<div class="slidebody"><ul>
<li>The real world of databases</li>
<li>Massive Excel spreadsheets</li>
<li>Access Migration</li>
<li>Normalisation</li>
<li>Update implications</li>
<li>Visual language of the Internet limitations</li>
<li>Future of browser components</li>
</ul>
</div></div><div class="slide"><h1>3.6. Design for optimised query resolution</h1>
<div class="slidebody"><ul>
<li>Skillswap talk</li>
<li>28th May 2008</li>
</ul>
</div></div><div class="slide"><h1>3.6.01. Introduction</h1>
<div class="slidebody"><ul>
<li>Pace of talk</li>
<li>Principals not query syntax</li>
<li>Online notes</li>
<li>Questions welcome anytime</li>
<li>Prompt thought about the issues</li>
</ul>
</div></div><div class="slide"><h1>3.6.02. Terms</h1>
<div class="slidebody"><ul>
<li>Tables/relations</li>
<li>Rows/tuples</li>
<li>Columns/attributes</li>
<li>Joins</li>
<ul>
<li><a href="../../../training/databases/1_data_models/1_3_joins/1_3_11_join_types_inner_and.html">Inner joins</a></li>
<li><a href="../../../training/databases/1_data_models/1_3_joins/1_3_12_outer_joins.html">Outer joins</a></li>
</ul>
<li>Indexes</li>
<ul>
<li><a href="../../../training/databases/2_dbms_systems/2_3_b_trees/2_3_06_b_trees.html">B+ trees</a></li>
<li><a href="../../../training/databases/2_dbms_systems/2_3_b_trees/2_3_03_multi_level_indices.html">Multi-level implementation</a>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.03. Domains and sets</h1>
<div class="slidebody"><ul>
<li>Domains</li>
<ul>
<li>Set of possible data</li>
<li>8-bit unsigned integer example</li>
</ul>
<li>Powersets</li>
<ul>
<li>Set</li>
<ul>
<li>Odd numbers less than 10</li>
<li>(1,3,5,7,9)</li>
</ul>
<li>Powerset</li>
<ul>
<li>Set of sets</li>
<ul>
<li>5 digit collection of non-repeating integers less than 10</li>
<li>((1,3,5,7,9),(2,3,5,7,9),(1,4,5,7,9),(1,3,6,7,9)...)</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.04. Query and snapshot</h1>
<div class="slidebody"><ul>
<li>Query + database snapshot returns one set of actual data</li>
<ul>
<li>but a query alone defines a powerset of possible data</li>
</ul>
<li>Load</li>
<ul>
<li>Metrics for query performance</li>
<li>Time is easy to measure</li>
<li>Load is better in the real world</li>
<ul>
<li>Query might be fast to execute, but require a lot of memory</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.05. Design in context</h1>
<div class="slidebody"><ul>
<li>Query design needs context</li>
<ul>
<li>Hardware information</li>
<ul>
<li><a href="../../../training/databases/2_dbms_systems/2_2_internals/2_2_01c_machine_architecture_by_capacity.html">L2, RAM, Disk : O(1), O(10), O(1000)</a></li>
</ul>
<li>Competition information (other Application Servers)</li>
<ul>
<li>MySQL, Apache, Tomcat, SVN</li>
</ul>
<li>Data information</li>
<ul>
<li>Likely number of rows, lifetime of information, interval distribution within domains</li>
</ul>
<li>Database design information</li>
<ul>
<li><a href="../../../training/databases/3_database_design/3_2_normal_forms.html">Normalisation</a></li>
</ul>
<li>Database implementation information</li>
<ul>
<li>Transaction granularity</li>
</ul>
<li>Use information</li>
<ul>
<li>Balance between read (SELECT) and write (INSERT, UPDATE, DELETE) ops</li>
</ul>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.06. Elementary steps</h1>
<div class="slidebody"><ul>
<li>Ask MySQL what it's doing</li>
<ul>
<li>Query analysis with EXPLAIN</li>
</ul>
<li>Cache the query</li>
<ul>
<li>no free lunch, there's almost always a cost</li>
<li>Simple</li>
<ul>
<li>Repetitive queries</li>
<li>Rare since requires constant snapshot</li>
<li>What's the point of the query</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.07. Query caching</h1>
<div class="slidebody"><ul>
<li>Complex - Summary table</li>
<ul>
<li>Multiple queries drawing data from subset of DB data</li>
<li>Cache subset</li>
<ul>
<li>Query subset rather than whole database</li>
</ul>
</ul>
<li>Complex - Age analyses</li>
<ul>
<li>Webstats, meaningful even if not last 24 hours</li>
<ul>
<li>Run the heavyweight analysis queries during downtime</li>
<li>Cache results</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.08. Avoid the query</h1>
<div class="slidebody"><ul>
<li>Cache the object</li>
<ul>
<li>Higher level primitives</li>
<li>Object persistence</li>
</ul>
<li>Get only the critical data</li>
<ul>
<li>What's critical now</li>
<li>What's required in 10s, 1m, 5m</li>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.09. Simplify</h1>
<div class="slidebody"><ul>
<li>Route/path to information</li>
<ul>
<li>Introduction</li>
<ul>
<li>Join is an arc, join time is arc length</li>
<li>Table is a node</li>
</ul>
<li>Graph traversal problem</li>
<ul>
<li>Dijkstra's shortest path</li>
<ul>
<li>Heuristic</li>
<ul>
<li>Search for optimal</li>
<li>General, each node defines a population of tuples</li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.10. Traversal</h1>
<div class="slidebody"><ul>
<li>Traversal of graph</li>
<ul>
<li>(aka. positive closure)</li>
<li>gives intermediate relation</li>
</ul>
<li>Goal</li>
<ul>
<li>Intermediate relation minimisation</li>
<ul>
<li>Space (memory, disk triangle)</li>
<li>Time (fast joins versus slow joins)</li>
<ul>
<li>Fewer relations</li>
<li>Fewer active attributes (horizontal cropping)</li>
<li>Fewer rows (vertical cropping)</li>
<ul>
<li>Role of single-relation WHERE statements</li>
</ul>
</ul>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.11. Optimise (Indexing)</h1>
<div class="slidebody"><ul>
<li>Giving the Optimiser hints</li>
<li>Indexing</li>
<ul>
<li>Simple - single attribute</li>
<ul>
<li>Index(A)</li>
<li>Reduce sparse domains (e.g. text)</li>
</ul>
<li>Composite - multiple attributes (typically pairs)</li>
<ul>
<li>Index (A,B)</li>
<li>Some subtleties in here</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.12. Optimise (Limit)</h1>
<div class="slidebody"><ul>
<li>Limit</li>
<ul>
<li>Valueable on sorts (0,10 faster than 0,1000!)</li>
<li>Beware limit referencing</li>
<ul>
<li>Limit 1000,10 will fetch the first 1000, then give you the 10 you want</li>
<ul>
<li>Search engines</li>
</ul>
<li>Better to use WHERE restriction if possible</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.13. Optimise (Delayed Joins)</h1>
<div class="slidebody"><ul>
<li>SELECT <full row> FROM (SELECT id FROM ... LIMIT 0,10)</li>
<ul>
<li>Subqueries not the silver bullet</li>
<li>Often not cached or indexed</li>
</ul>
<li>Views help manage complex relationships but not performance</li>
<li>Changing picture</li>
<ul>
<li>Even between MySQL 5.0 and 5.1</li>
<li>MySQL 6.0</li>
<ul>
<li>Falcon (transactional) Storage</li>
<li>Better subquery optimisation</li>
</ul>
</ul>
</ul>
</div></div><div class="slide"><h1>3.6.14. References</h1>
<div class="slidebody"><ul>
<li>External References for Section 3.6 only</li>
<ul>
<li>Shortest path</li>
<li><a href="http://en.wikipedia.org/wiki/Dijkstra's_algorithm">http://en.wikipedia.org/wiki/Dijkstra's_algorithm</a></li>
<li>CASO</li>
<li><a href="http://www.mysqlperformanceblog.com/">http://www.mysqlperformanceblog.com/</a></li>
<li>MySQL 6</li>
<li><a href="http://dev.mysql.com/doc/refman/6.0/en/index.html">http://dev.mysql.com/doc/refman/6.0/en/index.html</a></li>
</ul>
</ul>
</div></div>
</div>

</body>
</html>